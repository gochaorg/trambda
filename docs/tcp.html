<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/markdown/tcp.md at 2021-04-12
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>Trambda &#x2013; TCP клиент / сервер</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>trambda</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2021-04-12<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="intro.html" title="intro"><span class="none"></span>intro</a></li>
    <li><a href="plan.html" title="road map"><span class="none"></span>road map</a></li>
    <li><a href="core.html" title="core"><span class="none"></span>core</a></li>
    <li class="active"><a href="#"><span class="none"></span>tcp</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>TCP &#x43a;&#x43b;&#x438;&#x435;&#x43d;&#x442; / &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;</h1>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;dependency&gt;
    &lt;groupId&gt;xyz.cofe&lt;/groupId&gt;
    &lt;artifactId&gt;trambda-tcp&lt;/artifactId&gt;
    &lt;!-- &#x410;&#x43a;&#x442;&#x443;&#x430;&#x43b;&#x44c;&#x43d;&#x443;&#x44e; &#x432;&#x435;&#x440;&#x441;&#x438;&#x44e; &#x43b;&#x443;&#x447;&#x448;&#x435; &#x43f;&#x43e;&#x438;&#x441;&#x43a;&#x430;&#x442;&#x44c; 
           &#x43d;&#x430; https://oss.sonatype.org/
           &#x43d;&#x430; https://search.maven.org/ 
    --&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div>

<p>&#x411;&#x443;&#x434;&#x435;&#x442; &#x440;&#x430;&#x441;&#x441;&#x43c;&#x43e;&#x442;&#x440;&#x435;&#x43d;&#x43e;</p>
<ul>

<li>&#x41f;&#x443;&#x431;&#x43b;&#x438;&#x43a;&#x443;&#x435;&#x43c; &#x441;&#x432;&#x43e;&#x439; API</li>
<li>&#x41d;&#x430;&#x43f;&#x438;&#x441;&#x430;&#x43d;&#x438;&#x435; TCP &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430;</li>
<li>&#x41d;&#x430;&#x43f;&#x438;&#x441;&#x430;&#x43d;&#x438;&#x435; TCP &#x43a;&#x43b;&#x438;&#x435;&#x43d;&#x442;&#x430;</li>
<li>&#x41f;&#x438;&#x441;&#x430;&#x442;&#x44c; &#x441;&#x432;&#x43e;&#x439; TCP &#x441;&#x435;&#x440;&#x432;&#x435;&#x440; &#x43d;&#x435;&#x43e;&#x431;&#x44f;&#x437;&#x430;&#x442;&#x435;&#x43b;&#x44c;&#x43d;&#x43e;</li>
</ul><section>
<h2><a name="a.D0.9F.D1.83.D0.B1.D0.BB.D0.B8.D0.BA.D1.83.D0.B5.D0.BC_.D1.81.D0.B2.D0.BE.D0.B9_API"></a>&#x41f;&#x443;&#x431;&#x43b;&#x438;&#x43a;&#x443;&#x435;&#x43c; &#x441;&#x432;&#x43e;&#x439; API</h2>
<p>&#x414;&#x43e;&#x43f;&#x443;&#x441;&#x442;&#x438;&#x43c; &#x443; &#x43d;&#x430;&#x441; &#x435;&#x441;&#x442;&#x44c; &#x431;&#x438;&#x431;&#x43b;&#x438;&#x43e;&#x442;&#x435;&#x43a;&#x430; (&#x438;&#x43b;&#x438; API / &#x43d;&#x430;&#x431;&#x43e;&#x440; &#x438;&#x43d;&#x442;&#x435;&#x440;&#x444;&#x435;&#x439;&#x441;&#x43e;&#x432;), &#x43a;&#x43e;&#x442;&#x43e;&#x440;&#x430;&#x44f; &#x43f;&#x440;&#x43e;&#x442;&#x435;&#x441;&#x442;&#x438;&#x440;&#x43e;&#x432;&#x430;&#x43d;&#x430; &#x438; &#x440;&#x430;&#x431;&#x43e;&#x442;&#x430;&#x435;&#x442; &#x43b;&#x43e;&#x43a;&#x430;&#x43b;&#x44c;&#x43d;&#x43e;.</p>
<p>&#x412;&#x43e;&#x442; &#x442;&#x430;&#x43a;&#x430;&#x44f; <a class="externalLink" href="https://github.com/gochaorg/trambda/tree/381f59f0a41ceb83f9775e3fcfeca8028d88de00/trambda-tcp/src/test/java/xyz/cofe/trambda/tcp/demo">&#x43f;&#x440;&#x43e;&#x441;&#x442;&#x430;&#x44f; &#x431;&#x438;&#x431;&#x43b;&#x438;&#x43e;&#x442;&#x435;&#x43a;&#x430;</a>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">package xyz.cofe.trambda.tcp.demo;

/** &#x418;&#x43d;&#x444;&#x43e;&#x440;&#x43c;&#x430;&#x446;&#x438;&#x44f; &#x43e; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x435; &#x41e;&#x421; */
public class OsProc implements Serializable {
    // &#x418;&#x434;&#x435;&#x43d;&#x442;&#x438;&#x444;&#x438;&#x43a;&#x430;&#x442;&#x43e;&#x440; &#x440;&#x43e;&#x434;&#x438;&#x442;&#x435;&#x43b;&#x44c;&#x441;&#x43a;&#x43e;&#x433;&#x43e; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x430;
    private final Integer ppid;
    public Optional&lt;Integer&gt; getPpid(){ ... }
    
    // &#x418;&#x434;&#x435;&#x43d;&#x442;&#x438;&#x444;&#x438;&#x43a;&#x430;&#x442;&#x43e;&#x440; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x430;
    private final Integer pid;
    public int getPid(){ return pid; }
    
    // &#x418;&#x43c;&#x44f; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x430;
    private final String name;
    public String getName(){ return name; }
    
    // &#x41a;&#x43e;&#x43c;&#x430;&#x43d;&#x434;&#x43d;&#x430;&#x44f; &#x441;&#x442;&#x440;&#x43e;&#x43a;&#x430; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x430;
    private final String cmdLine;
    public Optional&lt;String&gt; getCmdline(){ ... }
    ...
}

/** &#x418;&#x43d;&#x442;&#x435;&#x440;&#x444;&#x435;&#x439;&#x441; &#x43f;&#x43e;&#x43b;&#x443;&#x447;&#x435;&#x43d;&#x438;&#x44f; &#x441;&#x43f;&#x438;&#x441;&#x43a;&#x430; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x43e;&#x432; */
public interface IEnv {
    // &#x43f;&#x43e;&#x43b;&#x443;&#x447;&#x435;&#x43d;&#x438;&#x44f; &#x441;&#x43f;&#x438;&#x441;&#x43a;&#x430; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x43e;&#x432;
    public List&lt;OsProc&gt; processes();
}

/** &#x420;&#x435;&#x430;&#x43b;&#x438;&#x437;&#x430;&#x446;&#x438;&#x44f; &#x438;&#x43d;&#x442;&#x435;&#x440;&#x444;&#x435;&#x439;&#x441;&#x430; &#x434;&#x43b;&#x44f; Linux */
public class LinuxEnv implements IEnv { ... }

/** &#x420;&#x435;&#x430;&#x43b;&#x438;&#x437;&#x430;&#x446;&#x438;&#x44f; &#x438;&#x43d;&#x442;&#x435;&#x440;&#x444;&#x435;&#x439;&#x441;&#x430; &#x434;&#x43b;&#x44f; Windows */
public class WindowsEnv implements IEnv { ... }
</pre></div></div>

<p>&#x422;&#x435;&#x43f;&#x435;&#x440;&#x44c; &#x447;&#x442;&#x43e; &#x44d;&#x442;&#x430; &#x431;&#x438;&#x431;&#x43b;&#x438;&#x43e;&#x442;&#x435;&#x43a;&#x430; &#x431;&#x44b;&#x43b;&#x430; &#x43a;&#x43b;&#x438;&#x435;&#x43d;&#x442;-&#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x43d;&#x43e;&#x439; &#x434;&#x435;&#x43b;&#x430;&#x435;&#x43c; &#x441;&#x434;&#x435;&#x43b;&#x430;&#x435;&#x43c; &#x441;&#x43b;&#x435;&#x434;&#x443;&#x44e;&#x449;&#x438;&#x435;:</p>
<ul>

<li>&#x41d;&#x430;&#x43f;&#x438;&#x448;&#x435;&#x43c; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;</li>
<li>&#x41d;&#x430;&#x43f;&#x438;&#x448;&#x435;&#x43c; &#x43a;&#x43b;&#x438;&#x435;&#x43d;&#x442;&#x430;</li>
</ul></section><section>
<h2><a name="a.D0.9D.D0.B0.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.B0"></a>&#x41d;&#x430;&#x43f;&#x438;&#x441;&#x430;&#x43d;&#x438;&#x435; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430;</h2>

<div class="source">
<div class="source"><pre class="prettyprint">// &#x421;&#x43e;&#x437;&#x434;&#x430;&#x43d;&#x438;&#x435; TCP &#x441;&#x43e;&#x43a;&#x435;&#x442;&#x430;
ServerSocket ssocket = new ServerSocket(port);

// &#x41d;&#x430;&#x441;&#x442;&#x440;&#x430;&#x438;&#x432;&#x430;&#x435;&#x43c; &#x441;&#x43e;&#x43a;&#x435;&#x442;
ssocket.setSoTimeout(1000*5);

// &#x421;&#x43e;&#x437;&#x434;&#x430;&#x435;&#x43c; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;
server = new TcpServer&lt;IEnv&gt;(
    // &#x41f;&#x435;&#x440;&#x435;&#x434;&#x430;&#x435;&#x43c; &#x441;&#x43e;&#x43a;&#x435;&#x442;
    ssocket,
    
    // &#x41f;&#x435;&#x440;&#x435;&#x434;&#x430;&#x435;&#x43c; &#x444;&#x443;&#x43d;&#x43a;&#x446;&#x438;&#x44e; &#x43f;&#x43e;&#x43b;&#x443;&#x447;&#x435;&#x43d;&#x438;&#x44f; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;&#x430; &#x434;&#x43b;&#x44f; &#x43d;&#x43e;&#x432;&#x43e;&#x439; &#x441;&#x435;&#x441;&#x441;&#x438;&#x438;
    s -&gt; new LinuxEnv(),
    
    // &#x41d;&#x430;&#x441;&#x442;&#x440;&#x430;&#x438;&#x432;&#x430;&#x435;&#x43c; &#x431;&#x435;&#x437;&#x43e;&#x43f;&#x430;&#x441;&#x43d;&#x43e;&#x441;&#x442;&#x44c;
    SecurityFilters.create(s -&gt; {
        
        // &#x420;&#x430;&#x437;&#x440;&#x435;&#x448;&#x430;&#x435;&#x43c; &#x432;&#x44b;&#x437;&#x43e;&#x432;&#x44b; &#x441;&#x442;&#x440;&#x43e;&#x433;&#x43e; - &#x43e;&#x43f;&#x440;&#x435;&#x434;&#x435;&#x43b;&#x435;&#x43d;&#x43d;&#x44b;&#x445; &#x43c;&#x435;&#x442;&#x43e;&#x434;&#x43e;&#x432; 
        s.allow( a -&gt; {
            
            // &#x41f;&#x443;&#x431;&#x43b;&#x438;&#x43a;&#x443;&#x435;&#x43c;&#x44b;&#x439; API &#x43d;&#x430;&#x448;&#x435;&#x433;&#x43e; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;&#x430; 
            a.invoke(&quot;demo api&quot;, c-&gt;
                c.getOwner().matches(
                    &quot;xyz\\.cofe\\.trambda\\.tcp\\.demo\\.([\\w\\d]+)&quot;));
            
            // &#x420;&#x430;&#x431;&#x43e;&#x442;&#x430; &#x441; &#x43a;&#x43e;&#x43b;&#x43b;&#x435;&#x43a;&#x446;&#x438;&#x44f;&#x43c;&#x438;
            a.invoke(&quot;java collections api&quot;, c-&gt;c.getOwner().matches(
                &quot;java\\.util\\.(List)|java\\.util\\.stream\\.([\\w\\d]+)&quot;));
            
            // &#x420;&#x430;&#x431;&#x43e;&#x442;&#x430; &#x441; Java &#x441;&#x442;&#x440;&#x43e;&#x43a;&#x430;&#x43c;&#x438;
            a.invoke(&quot;java lang api&quot;, c-&gt;
                c.getOwner().matches(&quot;java\\.lang\\.(String)&quot;));
            
            // &#x41c;&#x435;&#x442;&#x43e;&#x434;&#x44b; &#x43a;&#x43e;&#x442;&#x43e;&#x440;&#x44b;&#x435; &#x438;&#x441;&#x43f;&#x43e;&#x43b;&#x44c;&#x437;&#x443;&#x435;&#x442; &#x43a;&#x43e;&#x43c;&#x43f;&#x438;&#x43b;&#x44f;&#x442;&#x43e;&#x440; Java
            a.invoke(&quot;java compiler&quot;, c-&gt;
                c.getOwner().matches(
                    &quot;java\\.lang\\.invoke\\.(LambdaMetafactory|StringConcatFactory)&quot;));
        });
        
        // &#x412;&#x441;&#x435; &#x43e;&#x441;&#x442;&#x430;&#x43b;&#x44c;&#x43d;&#x43e;&#x435; &#x437;&#x430;&#x43f;&#x440;&#x435;&#x449;&#x430;&#x435;&#x43c;
        s.deny().any(&quot;by default&quot;);
    })
);

// &#x423;&#x43a;&#x430;&#x437;&#x44b;&#x432;&#x430;&#x435;&#x43c; &#x447;&#x442;&#x43e; Thread &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430; &#x431;&#x443;&#x434;&#x435;&#x442; &#x437;&#x430;&#x43f;&#x443;&#x449;&#x435;&#x43d; &#x43a;&#x430;&#x43a; &#x444;&#x43e;&#x43d;&#x43e;&#x432;&#x44b;&#x439;
server.setDaemon(true);

// &#x417;&#x430;&#x43f;&#x443;&#x441;&#x43a;&#x430;&#x435;&#x43c; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;
server.start();
</pre></div></div>
</section><section>
<h2><a name="a.D0.9D.D0.B0.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D0.B0"></a>&#x41d;&#x430;&#x43f;&#x438;&#x441;&#x430;&#x43d;&#x438;&#x435; &#x43a;&#x43b;&#x438;&#x435;&#x43d;&#x442;&#x430;</h2>
<p>&#x41d;&#x430;&#x43f;&#x438;&#x441;&#x430;&#x43d;&#x438;&#x435; &#x43a;&#x43b;&#x438;&#x435;&#x43d;&#x442;&#x430; &#x435;&#x449;&#x435; &#x43f;&#x440;&#x43e;&#x449;&#x435;:</p>

<div class="source">
<div class="source"><pre class="prettyprint">var tcpQuery = TcpQuery
    // &#x41a;&#x430;&#x43a;&#x43e;&#x439; API &#x43c;&#x44b; &#x431;&#x443;&#x434;&#x435;&#x43c; &#x438;&#x441;&#x43f;&#x43e;&#x43b;&#x44c;&#x437;&#x43e;&#x432;&#x430;&#x442;&#x44c;
    .create(IEnv.class)
    // &#x423;&#x43a;&#x430;&#x437;&#x44b;&#x432;&#x430;&#x435;&#x43c; &#x430;&#x434;&#x440;&#x435;&#x441; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430;
    .host(&quot;localhost&quot;).port(port)
    // &#x41f;&#x43e;&#x43b;&#x443;&#x447;&#x430;&#x435;&#x43c; Query&lt;IEnv&gt;
    .build();

// &#x412;&#x44b;&#x43f;&#x43e;&#x43b;&#x43d;&#x44f;&#x435;&#x43c; &#x437;&#x430;&#x43f;&#x440;&#x43e;&#x441; &#x43a; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x443;, &#x43f;&#x43e;&#x43b;&#x443;&#x447;&#x438;&#x43c; &#x441;&#x43f;&#x438;&#x441;&#x43e;&#x43a; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x43e;&#x432; chrome/java &#x43d;&#x430; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x435;
var qRegex = &quot;chrome|java&quot;;
tcpQuery.apply( env -&gt;
    env.processes().stream()
    // &#x424;&#x438;&#x43b;&#x44c;&#x442;&#x440;&#x443;&#x435;&#x43c; &#x441;&#x43f;&#x438;&#x441;&#x43e;&#x43a; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x43e;&#x432;
    .filter( p -&gt; p.getName().matches(&quot;(?is).*(&quot;+qRegex+&quot;).*&quot;) )
    // &#x41f;&#x440;&#x435;&#x43e;&#x431;&#x440;&#x430;&#x437;&#x443;&#x435;&#x43c; Stream&lt;OsProc&gt; &#x432; List&lt;OsProc&gt;
    // &#x442;.&#x43a;. List&lt;?&gt; - &#x440;&#x435;&#x430;&#x43b;&#x438;&#x437;&#x443;&#x435;&#x442; Serializable
    // &#x430; Stream&lt;?&gt; - &#x43d;&#x435; &#x440;&#x435;&#x430;&#x43b;&#x438;&#x437;&#x443;&#x435;&#x442; Serializable
    .collect(Collectors.toList())
)
    // &#x41e;&#x442;&#x43e;&#x431;&#x440;&#x430;&#x436;&#x430;&#x435;&#x43c; &#x43f;&#x43e;&#x43b;&#x443;&#x447;&#x435;&#x43d;&#x43d;&#x44b;&#x439; &#x441;&#x43f;&#x438;&#x441;&#x43e;&#x43a; &#x43f;&#x440;&#x43e;&#x446;&#x435;&#x441;&#x441;&#x43e;&#x432;
    .stream().map(OsProc::toString).forEach(log::info);
</pre></div></div>
</section><section>
<h2><a name="a.D0.9F.D0.B8.D1.81.D0.B0.D1.82.D1.8C_.D1.81.D0.B2.D0.BE.D0.B9_TCP_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80_.D0.BD.D0.B5.D0.BE.D0.B1.D1.8F.D0.B7.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE"></a>&#x41f;&#x438;&#x441;&#x430;&#x442;&#x44c; &#x441;&#x432;&#x43e;&#x439; TCP &#x441;&#x435;&#x440;&#x432;&#x435;&#x440; &#x43d;&#x435;&#x43e;&#x431;&#x44f;&#x437;&#x430;&#x442;&#x435;&#x43b;&#x44c;&#x43d;&#x43e;</h2>
<p>&#x412;&#x43e;&#x43e;&#x431;&#x449;&#x435; &#x43f;&#x438;&#x441;&#x430;&#x442;&#x44c; &#x441;&#x432;&#x43e;&#x439; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440; &#x43d;&#x435;&#x43e;&#x431;&#x44f;&#x437;&#x430;&#x442;&#x435;&#x43b;&#x44c;&#x43d;&#x43e;, &#x434;&#x43e;&#x441;&#x442;&#x430;&#x442;&#x43e;&#x447;&#x43d;&#x43e;</p>
<ol style="list-style-type: decimal">

<li>&#x412;&#x437;&#x44f;&#x442;&#x44c; &#x43f;&#x430;&#x43a;&#x435;&#x442; <a class="externalLink" href="https://github.com/gochaorg/trambda/tree/381f59f0a41ceb83f9775e3fcfeca8028d88de00/trambda-tcp-serv-cli">trambda-tcp-serv-cli</a></li>
</ol>
<ul>

<li>&#x41f;&#x430;&#x43a;&#x435;&#x442; &#x438;&#x43c;&#x435;&#x435;&#x442; &#x441;&#x43b;&#x435;&#x434;&#x443;&#x44e;&#x449;&#x443;&#x44e; &#x441;&#x442;&#x440;&#x443;&#x43a;&#x442;&#x443;&#x440;&#x443; &#x43a;&#x430;&#x442;&#x430;&#x43b;&#x43e;&#x433;&#x43e;&#x432;/&#x444;&#x430;&#x439;&#x43b;&#x43e;&#x432;
<ul>

<li><code>bin/</code> - &#x43a;&#x430;&#x442;&#x430;&#x43b;&#x43e;&#x433; shell &#x441;&#x43a;&#x440;&#x438;&#x43f;&#x442;&#x430;&#x43c;&#x438;, &#x434;&#x43b;&#x44f; &#x437;&#x430;&#x43f;&#x443;&#x441;&#x43a;&#x430; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430;
<ul>

<li><code>bin/trambda-tcp-serv</code> - shell &#x441;&#x43a;&#x440;&#x438;&#x43f;&#x442; &#x434;&#x43b;&#x44f; &#x437;&#x430;&#x43f;&#x443;&#x441;&#x43a;&#x430; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430;</li>
<li><code>bin/trambda-tcp-serv.bat</code> - batch &#x441;&#x43a;&#x440;&#x438;&#x43f;&#x442; &#x434;&#x43b;&#x44f; &#x437;&#x430;&#x43f;&#x443;&#x441;&#x43a;&#x430; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430;</li>
<li><code>jars/</code> - &#x41a;&#x430;&#x442;&#x430;&#x43b;&#x43e;&#x433; &#x441; &#x431;&#x438;&#x431;&#x43b;&#x438;&#x43e;&#x442;&#x435;&#x43a;&#x430;&#x43c;&#x438; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440;&#x430;</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol style="list-style-type: decimal">

<li>&#x421;&#x43a;&#x43e;&#x43f;&#x438;&#x440;&#x43e;&#x432;&#x430;&#x442;&#x44c; &#x441;&#x432;&#x43e;&#x44e; &#x431;&#x438;&#x431;&#x43b;&#x438;&#x43e;&#x442;&#x435;&#x43a;&#x443; (&#x441;&#x432;&#x43e;&#x439; API + &#x440;&#x435;&#x430;&#x43b;&#x438;&#x437;&#x430;&#x446;&#x438;&#x44e; &#x435;&#x433;&#x43e;) &#x432; &#x43a;&#x430;&#x442;&#x430;&#x43b;&#x43e;&#x433; <code>jars/</code></li>
<li>&#x41f;&#x43e;&#x434;&#x433;&#x43e;&#x442;&#x43e;&#x432;&#x438;&#x442;&#x44c; &#x441;&#x43a;&#x440;&#x438;&#x43f;&#x442; &#x437;&#x430;&#x43f;&#x443;&#x441;&#x43a;&#x430;, &#x43d;&#x430;&#x43f;&#x440;&#x438;&#x43c;&#x435;&#x440; <code>my_service.groovy</code>, &#x435;&#x433;&#x43e; &#x43a;&#x43e;&#x434;, &#x431;&#x443;&#x434;&#x435;&#x442; &#x43d;&#x438;&#x436;&#x435;</li>
<li>&#x417;&#x430;&#x43f;&#x443;&#x441;&#x442;&#x438;&#x442;&#x44c; &#x441;&#x435;&#x440;&#x432;&#x435;&#x440; &#x441; &#x443;&#x43a;&#x430;&#x437;&#x430;&#x43d;&#x438;&#x435;&#x43c; &#x441;&#x43a;&#x440;&#x438;&#x43f;&#x442;&#x430; <code>$ bin/trambda-tcp-serv -s my_service.groovy</code></li>
</ol><section>
<h3><a name="my_service.groovy"></a>my_service.groovy</h3>

<div class="source">
<div class="source"><pre class="prettyprint">// &#x41f;&#x443;&#x431;&#x43b;&#x438;&#x43a;&#x443;&#x435;&#x43c; &#x43d;&#x430;&#x448; API, &#x43a;&#x430;&#x43a; &#x43d;&#x435;&#x43a;&#x438;&#x439; &#x441;&#x435;&#x442;&#x435;&#x432;&#x43e;&#x439; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;
app.service(
    // &#x410;&#x434;&#x440;&#x435;&#x441;:&#x43f;&#x43e;&#x440;&#x442; - &#x430;&#x434;&#x440;&#x435;&#x441; &#x43d;&#x430; &#x43a;&#x43e;&#x442;&#x43e;&#x440;&#x43e;&#x43c; &#x431;&#x443;&#x434;&#x435;&#x442; &#x437;&#x430;&#x43f;&#x443;&#x449;&#x435;&#x43d; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;
    // &#x430;&#x434;&#x440;&#x435;&#x441; &#x43c;&#x43e;&#x436;&#x435;&#x442; &#x431;&#x44b;&#x442;&#x44c; &#x43d;&#x430;&#x43f;&#x440;&#x438;&#x43c;&#x435;&#x440; localhost:7890
    //   &#x442;&#x43e;&#x433;&#x434;&#x430; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441; &#x431;&#x443;&#x434;&#x435;&#x442; &#x434;&#x43e;&#x441;&#x442;&#x443;&#x43f;&#x435;&#x43d; &#x442;&#x43e;&#x43b;&#x44c;&#x43a;&#x43e; &#x43b;&#x43e;&#x43a;&#x430;&#x43b;&#x44c;&#x43d;&#x43e;
    // &#x41c;&#x43e;&#x436;&#x43d;&#x43e; &#x443;&#x43a;&#x430;&#x437;&#x44b;&#x432;&#x430;&#x442;&#x44c; &#x43d;&#x435; ip, &#x430; dns &#x438;&#x43c;&#x44f;, &#x43d;&#x430;&#x43f;&#x440;&#x438;&#x43c;&#x435;&#x440; i-env.myserver.com:12345
    &quot;0.0.0.0:9988&quot;, 
    new xyz.cofe.trambda.demo.api.LinuxEnv() 
) {
    daemon false
    // &#x423;&#x43a;&#x430;&#x437;&#x44b;&#x432;&#x430;&#x435;&#x43c; &#x43d;&#x430;&#x441;&#x442;&#x440;&#x43e;&#x439;&#x43a;&#x438; &#x431;&#x435;&#x437;&#x43e;&#x43f;&#x430;&#x441;&#x43d;&#x43e;&#x441;&#x442;&#x438;
    security {
        // &#x41a;&#x430;&#x43a;&#x438;&#x435; &#x43c;&#x435;&#x442;&#x43e;&#x434;&#x44b; &#x431;&#x443;&#x434;&#x443;&#x442; &#x434;&#x43e;&#x441;&#x442;&#x443;&#x43f;&#x43d;&#x44b;&#x43c;&#x435;
        allow {
            // &#x41c;&#x435;&#x442;&#x43e;&#x434;&#x44b; &#x43a;&#x43e;&#x442;&#x43e;&#x440;&#x44b;&#x435; &#x438;&#x441;&#x43f;&#x43e;&#x43b;&#x44c;&#x437;&#x443;&#x435;&#x442; &#x43a;&#x43e;&#x43c;&#x43f;&#x438;&#x43b;&#x44f;&#x442;&#x43e;&#x440; Java
            invoke( 'Java compiler' ){
                methodOwner ==~ /java\.lang\.invoke\.(LambdaMetafactory|StringConcatFactory)/
            }
            // &#x420;&#x430;&#x431;&#x43e;&#x442;&#x430; &#x441; &#x43a;&#x43e;&#x43b;&#x43b;&#x435;&#x43a;&#x446;&#x438;&#x44f;&#x43c;&#x438;
            invoke( 'Java collections' ){
                methodOwner ==~ /java\.util\.(stream\.(Stream|Collectors)|(List))/
            }
            // &#x420;&#x430;&#x431;&#x43e;&#x442;&#x430; &#x441; Java &#x441;&#x442;&#x440;&#x43e;&#x43a;&#x430;&#x43c;&#x438;
            invoke( 'Java lang' ){
                methodOwner ==~ /java\.lang\.String/
            }
            // &#x41f;&#x443;&#x431;&#x43b;&#x438;&#x43a;&#x443;&#x435;&#x43c;&#x44b;&#x439; API &#x43d;&#x430;&#x448;&#x435;&#x433;&#x43e; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;&#x430; 
            invoke( 'Api '){
                methodOwner ==~ /xyz\.cofe\.trambda\.demo\.api\.(IEnv|OsProc)/
            }
        }
        // &#x412;&#x441;&#x435; &#x43e;&#x441;&#x442;&#x430;&#x43b;&#x44c;&#x43d;&#x44b;&#x435; &#x43c;&#x435;&#x442;&#x43e;&#x434;&#x44b; &#x43d;&#x435; &#x431;&#x443;&#x434;&#x443;&#x442; &#x434;&#x43e;&#x441;&#x442;&#x443;&#x43f;&#x43d;&#x44b;
        deny {
            any(&quot;ban all&quot;)
        }
    }
}

// &#x417;&#x430;&#x43f;&#x443;&#x441;&#x43a;&#x430;&#x435;&#x43c; &#x432;&#x441;&#x435; &#x43d;&#x430;&#x448;&#x438; &#x441;&#x435;&#x440;&#x432;&#x438;&#x441;&#x44b;
start();
</pre></div></div></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
All rights reserved.
        </div>
      </div>
    </footer>
  </body>
</html>
